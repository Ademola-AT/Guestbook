---
version: 1
interactions:
- request:
    body: '{"TableName":"docstore-test-1"}'
    form: {}
    headers:
      Accept-Encoding:
      - identity
      Content-Length:
      - "31"
      Content-Type:
      - application/x-amz-json-1.0
      User-Agent:
      - aws-sdk-go/1.19.16 (go1.12; linux; amd64)
      X-Amz-Date:
      - 20190426T172545Z
      X-Amz-Target:
      - DynamoDB_20120810.DescribeTable
    url: https://dynamodb.us-east-2.amazonaws.com/
    method: POST
  response:
    body: '{"Table":{"AttributeDefinitions":[{"AttributeName":"name","AttributeType":"S"}],"CreationDateTime":1.556147129209E9,"ItemCount":7,"KeySchema":[{"AttributeName":"name","KeyType":"HASH"}],"ProvisionedThroughput":{"NumberOfDecreasesToday":0,"ReadCapacityUnits":5,"WriteCapacityUnits":5},"TableArn":"arn:aws:dynamodb:us-east-2:462380225722:table/docstore-test-1","TableId":"92dd3571-35a9-4cf0-894f-f1c1672c4772","TableName":"docstore-test-1","TableSizeBytes":701,"TableStatus":"ACTIVE"}}'
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - "483"
      Content-Type:
      - application/x-amz-json-1.0
      Date:
      - Fri, 26 Apr 2019 17:25:45 GMT
      Server:
      - Server
      X-Amz-Crc32:
      - "2073371389"
      X-Amzn-Requestid:
      - PDOGR1VRP1N4K4C9AT4GRRAQVBVV4KQNSO5AEMVJF66Q9ASUAAJG
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"ClientRequestToken":"e81dc3fe-b200-4a2b-bcc1-8cdb668a4434","TransactItems":[{"Put":{"Item":{"DocstoreRevision":{"S":"849874e9-8e03-4c70-88fd-1e494985604a"},"a":{"S":"A"},"b":{"S":"B"},"name":{"S":"testUpdate"}},"TableName":"docstore-test-1"}}]}'
    form: {}
    headers:
      Accept-Encoding:
      - identity
      Content-Length:
      - "246"
      Content-Type:
      - application/x-amz-json-1.0
      User-Agent:
      - aws-sdk-go/1.19.16 (go1.12; linux; amd64)
      X-Amz-Date:
      - 20190426T172545Z
      X-Amz-Target:
      - DynamoDB_20120810.TransactWriteItems
    url: https://dynamodb.us-east-2.amazonaws.com/
    method: POST
  response:
    body: '{}'
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - "2"
      Content-Type:
      - application/x-amz-json-1.0
      Date:
      - Fri, 26 Apr 2019 17:25:45 GMT
      Server:
      - Server
      X-Amz-Crc32:
      - "2745614147"
      X-Amzn-Requestid:
      - TM09LP9T83A3326R633LIQKUB3VV4KQNSO5AEMVJF66Q9ASUAAJG
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"ClientRequestToken":"59ed352a-35fe-4de0-a6d3-ee61444986e1","TransactItems":[{"Update":{"ConditionExpression":"attribute_exists
      (#0)","ExpressionAttributeNames":{"#0":"name","#1":"b","#2":"a","#3":"c","#4":"DocstoreRevision"},"ExpressionAttributeValues":{":0":{"S":"X"},":1":{"S":"C"},":2":{"S":"012c144e-b562-4033-8a73-8866a019f91d"}},"Key":{"name":{"S":"testUpdate"}},"TableName":"docstore-test-1","UpdateExpression":"REMOVE
      #1\nSET #2 = :0, #3 = :1, #4 = :2\n"}}]}'
    form: {}
    headers:
      Accept-Encoding:
      - identity
      Content-Length:
      - "468"
      Content-Type:
      - application/x-amz-json-1.0
      User-Agent:
      - aws-sdk-go/1.19.16 (go1.12; linux; amd64)
      X-Amz-Date:
      - 20190426T172545Z
      X-Amz-Target:
      - DynamoDB_20120810.TransactWriteItems
    url: https://dynamodb.us-east-2.amazonaws.com/
    method: POST
  response:
    body: '{}'
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - "2"
      Content-Type:
      - application/x-amz-json-1.0
      Date:
      - Fri, 26 Apr 2019 17:25:45 GMT
      Server:
      - Server
      X-Amz-Crc32:
      - "2745614147"
      X-Amzn-Requestid:
      - 93D5AU3525UEJ79795IPC20G3NVV4KQNSO5AEMVJF66Q9ASUAAJG
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"TransactItems":[{"Get":{"Key":{"name":{"S":"testUpdate"}},"TableName":"docstore-test-1"}}]}'
    form: {}
    headers:
      Accept-Encoding:
      - identity
      Content-Length:
      - "93"
      Content-Type:
      - application/x-amz-json-1.0
      User-Agent:
      - aws-sdk-go/1.19.16 (go1.12; linux; amd64)
      X-Amz-Date:
      - 20190426T172545Z
      X-Amz-Target:
      - DynamoDB_20120810.TransactGetItems
    url: https://dynamodb.us-east-2.amazonaws.com/
    method: POST
  response:
    body: '{"Responses":[{"Item":{"a":{"S":"X"},"c":{"S":"C"},"DocstoreRevision":{"S":"012c144e-b562-4033-8a73-8866a019f91d"},"name":{"S":"testUpdate"}}}]}'
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - "144"
      Content-Type:
      - application/x-amz-json-1.0
      Date:
      - Fri, 26 Apr 2019 17:25:45 GMT
      Server:
      - Server
      X-Amz-Crc32:
      - "2012313760"
      X-Amzn-Requestid:
      - 1CJV8HMQO01VHOKG0DJG12FVFJVV4KQNSO5AEMVJF66Q9ASUAAJG
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"ClientRequestToken":"e923190e-c311-4f7b-add6-5c8141969ddb","TransactItems":[{"Update":{"ConditionExpression":"attribute_exists
      (#0)","ExpressionAttributeNames":{"#0":"name","#1":"x","#2":"DocstoreRevision"},"ExpressionAttributeValues":{":0":{"S":"y"},":1":{"S":"ca8cfa7f-fc5d-4810-bb89-0f46c64fcc24"}},"Key":{"name":{"S":"doesNotExist"}},"TableName":"docstore-test-1","UpdateExpression":"SET
      #1 = :0, #2 = :1\n"}}]}'
    form: {}
    headers:
      Accept-Encoding:
      - identity
      Content-Length:
      - "417"
      Content-Type:
      - application/x-amz-json-1.0
      User-Agent:
      - aws-sdk-go/1.19.16 (go1.12; linux; amd64)
      X-Amz-Date:
      - 20190426T172545Z
      X-Amz-Target:
      - DynamoDB_20120810.TransactWriteItems
    url: https://dynamodb.us-east-2.amazonaws.com/
    method: POST
  response:
    body: '{"__type":"com.amazonaws.dynamodb.v20120810#TransactionCanceledException","CancellationReasons":[{"Code":"ConditionalCheckFailed","Message":"The
      conditional request failed"}],"Message":"Transaction cancelled, please refer
      cancellation reasons for specific reasons [ConditionalCheckFailed]"}'
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - "290"
      Content-Type:
      - application/x-amz-json-1.0
      Date:
      - Fri, 26 Apr 2019 17:25:45 GMT
      Server:
      - Server
      X-Amz-Crc32:
      - "3141789222"
      X-Amzn-Requestid:
      - 507GEDG1ONM2RJ9DTN4RO1JD2NVV4KQNSO5AEMVJF66Q9ASUAAJG
    status: 400 Bad Request
    code: 400
    duration: ""
- request:
    body: '{"ClientRequestToken":"cd850d9a-19c0-40d6-a4bb-3312d8f15030","TransactItems":[{"Put":{"Item":{"DocstoreRevision":{"S":"4b9edc3d-b784-434f-9341-3a6d32d09d8a"},"name":{"S":"testRevisionField"},"s":{"S":"a"}},"TableName":"docstore-test-1"}}]}'
    form: {}
    headers:
      Accept-Encoding:
      - identity
      Content-Length:
      - "239"
      Content-Type:
      - application/x-amz-json-1.0
      User-Agent:
      - aws-sdk-go/1.19.16 (go1.12; linux; amd64)
      X-Amz-Date:
      - 20190426T172545Z
      X-Amz-Target:
      - DynamoDB_20120810.TransactWriteItems
    url: https://dynamodb.us-east-2.amazonaws.com/
    method: POST
  response:
    body: '{}'
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - "2"
      Content-Type:
      - application/x-amz-json-1.0
      Date:
      - Fri, 26 Apr 2019 17:25:45 GMT
      Server:
      - Server
      X-Amz-Crc32:
      - "2745614147"
      X-Amzn-Requestid:
      - ABBTK4T19AUE2EVD5PDH6H2UQFVV4KQNSO5AEMVJF66Q9ASUAAJG
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"TransactItems":[{"Get":{"Key":{"name":{"S":"testRevisionField"}},"TableName":"docstore-test-1"}}]}'
    form: {}
    headers:
      Accept-Encoding:
      - identity
      Content-Length:
      - "100"
      Content-Type:
      - application/x-amz-json-1.0
      User-Agent:
      - aws-sdk-go/1.19.16 (go1.12; linux; amd64)
      X-Amz-Date:
      - 20190426T172545Z
      X-Amz-Target:
      - DynamoDB_20120810.TransactGetItems
    url: https://dynamodb.us-east-2.amazonaws.com/
    method: POST
  response:
    body: '{"Responses":[{"Item":{"DocstoreRevision":{"S":"4b9edc3d-b784-434f-9341-3a6d32d09d8a"},"name":{"S":"testRevisionField"},"s":{"S":"a"}}}]}'
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - "137"
      Content-Type:
      - application/x-amz-json-1.0
      Date:
      - Fri, 26 Apr 2019 17:25:45 GMT
      Server:
      - Server
      X-Amz-Crc32:
      - "483636587"
      X-Amzn-Requestid:
      - 56S8F7PIRAB49NMPSLD1MH6FSNVV4KQNSO5AEMVJF66Q9ASUAAJG
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"ClientRequestToken":"6a92216d-4884-478c-90a5-d80d36432160","TransactItems":[{"Update":{"ConditionExpression":"(attribute_exists
      (#0)) AND (#1 = :0)","ExpressionAttributeNames":{"#0":"name","#1":"DocstoreRevision","#2":"s"},"ExpressionAttributeValues":{":0":{"S":"4b9edc3d-b784-434f-9341-3a6d32d09d8a"},":1":{"S":"c"},":2":{"S":"4c6a1380-5c56-4557-804d-e8c05adbdc78"}},"Key":{"name":{"S":"testRevisionField"}},"TableName":"docstore-test-1","UpdateExpression":"SET
      #2 = :1, #1 = :2\n"}}]}'
    form: {}
    headers:
      Accept-Encoding:
      - identity
      Content-Length:
      - "488"
      Content-Type:
      - application/x-amz-json-1.0
      User-Agent:
      - aws-sdk-go/1.19.16 (go1.12; linux; amd64)
      X-Amz-Date:
      - 20190426T172545Z
      X-Amz-Target:
      - DynamoDB_20120810.TransactWriteItems
    url: https://dynamodb.us-east-2.amazonaws.com/
    method: POST
  response:
    body: '{}'
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - "2"
      Content-Type:
      - application/x-amz-json-1.0
      Date:
      - Fri, 26 Apr 2019 17:25:45 GMT
      Server:
      - Server
      X-Amz-Crc32:
      - "2745614147"
      X-Amzn-Requestid:
      - 4DEQ4UVFG1M4JB7TVLDAQL1NI3VV4KQNSO5AEMVJF66Q9ASUAAJG
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"ClientRequestToken":"2feb7d95-31d2-4405-acf1-30388d76c575","TransactItems":[{"Update":{"ConditionExpression":"(attribute_exists
      (#0)) AND (#1 = :0)","ExpressionAttributeNames":{"#0":"name","#1":"DocstoreRevision","#2":"s"},"ExpressionAttributeValues":{":0":{"S":"4b9edc3d-b784-434f-9341-3a6d32d09d8a"},":1":{"S":"c"},":2":{"S":"45dc7dda-d461-40ab-a385-5fb16fd6ff43"}},"Key":{"name":{"S":"testRevisionField"}},"TableName":"docstore-test-1","UpdateExpression":"SET
      #2 = :1, #1 = :2\n"}}]}'
    form: {}
    headers:
      Accept-Encoding:
      - identity
      Content-Length:
      - "488"
      Content-Type:
      - application/x-amz-json-1.0
      User-Agent:
      - aws-sdk-go/1.19.16 (go1.12; linux; amd64)
      X-Amz-Date:
      - 20190426T172545Z
      X-Amz-Target:
      - DynamoDB_20120810.TransactWriteItems
    url: https://dynamodb.us-east-2.amazonaws.com/
    method: POST
  response:
    body: '{"__type":"com.amazonaws.dynamodb.v20120810#TransactionCanceledException","CancellationReasons":[{"Code":"ConditionalCheckFailed","Message":"The
      conditional request failed"}],"Message":"Transaction cancelled, please refer
      cancellation reasons for specific reasons [ConditionalCheckFailed]"}'
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - "290"
      Content-Type:
      - application/x-amz-json-1.0
      Date:
      - Fri, 26 Apr 2019 17:25:45 GMT
      Server:
      - Server
      X-Amz-Crc32:
      - "3141789222"
      X-Amzn-Requestid:
      - 1P58Q4UEDTJ6EI1S5MTGQ7MKNFVV4KQNSO5AEMVJF66Q9ASUAAJG
    status: 400 Bad Request
    code: 400
    duration: ""
